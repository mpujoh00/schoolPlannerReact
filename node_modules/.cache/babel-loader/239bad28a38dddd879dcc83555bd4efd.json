{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"C:/Users/kaela/universidad/winter semester/graphical user interfaces/labs/school_planner_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/kaela/universidad/winter semester/graphical user interfaces/labs/school_planner_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/kaela/universidad/winter semester/graphical user interfaces/labs/school_planner_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from\"axios\";import{useForm}from\"react-hook-form\";import{useLocation,useHistory}from'react-router-dom';export default function CreateActivity(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),lectures=_useState2[0],setLectures=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),teachers=_useState4[0],setTeachers=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),groups=_useState6[0],setGroups=_useState6[1];var location=useLocation();var history=useHistory();useEffect(function(){var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log('getting data...');_context.next=3;return axios('/plannerData');case 3:result=_context.sent;setLectures(result.data.classes);setTeachers(result.data.teachers);setGroups(result.data.groups);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();getData();},[]);var optionsSelect=function optionsSelect(item){return/*#__PURE__*/_jsx(\"option\",{children:item});};var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var onSubmit=function onSubmit(data){var activity={'room':location.state.room,'group':data['group'],'class':data['class'],'slot':location.state.slot,'teacher':data['teacher'],'day':location.state.day};console.log(data);console.log(activity);axios.post('/createActivity',activity).then(function(){return console.log('New activity created');}).catch(function(err){return console.error(err);});// back to home\nhistory.push('/');};return/*#__PURE__*/_jsx(\"div\",{className:\"wrapper\",style:{marginLeft:'30%',marginRight:'30%',marginTop:'10px'},children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"h1\",{style:{marginLeft:'25%',marginBottom:'20px',marginTop:'20px'},children:\"New activity\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Select lecture\"}),/*#__PURE__*/_jsx(\"select\",{name:\"class\",className:\"form-control\",ref:register({required:true}),children:lectures.map(optionsSelect)}),errors.class&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red',marginLeft:'5px'},children:\"Field required\"}),/*#__PURE__*/_jsx(\"label\",{style:{marginTop:'10px'},children:\"Select teacher\"}),/*#__PURE__*/_jsx(\"select\",{name:\"teacher\",className:\"form-control\",ref:register({required:true}),children:teachers.map(optionsSelect)}),errors.teacher&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red',marginLeft:'5px'},children:\"Field required\"}),/*#__PURE__*/_jsx(\"label\",{style:{marginTop:'10px'},children:\"Select group\"}),/*#__PURE__*/_jsx(\"select\",{name:\"group\",className:\"form-control\",ref:register({required:true}),style:{marginBottom:'20px'},children:groups.map(optionsSelect)}),errors.group&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red',marginLeft:'5px'},children:\"Field required\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Create activity\",className:\"btn btn-block\",style:{marginTop:'20px',backgroundColor:'#bb99ff'}}),/*#__PURE__*/_jsx(\"input\",{value:\"Cancel\",className:\"btn btn-block\",style:{marginTop:'20px',backgroundColor:'#d1d1e0'},onClick:function onClick(){return history.push('/');}})]})});}","map":{"version":3,"sources":["C:/Users/kaela/universidad/winter semester/graphical user interfaces/labs/school_planner_react/src/components/createActivity.js"],"names":["React","useState","useEffect","axios","useForm","useLocation","useHistory","CreateActivity","props","lectures","setLectures","teachers","setTeachers","groups","setGroups","location","history","getData","console","log","result","data","classes","optionsSelect","item","register","handleSubmit","errors","onSubmit","activity","state","room","slot","day","post","then","catch","err","error","push","marginLeft","marginRight","marginTop","marginBottom","required","map","class","color","teacher","group","backgroundColor"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport axios from \"axios\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\n\r\nexport default function CreateActivity(props) {\r\n\r\n    const [lectures, setLectures] = useState([]);\r\n    const [teachers, setTeachers] = useState([]);\r\n    const [groups, setGroups] = useState([]);\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        const getData = async () => {\r\n            console.log('getting data...');\r\n            const result = await axios(\r\n                '/plannerData',\r\n            );\r\n            setLectures(result.data.classes);\r\n            setTeachers(result.data.teachers);\r\n            setGroups(result.data.groups);\r\n        }\r\n        getData();\r\n    }, []);\r\n\r\n    const optionsSelect = (item) => {\r\n        return <option>{item}</option>;\r\n    }\r\n\r\n    const { register, handleSubmit, errors } = useForm();\r\n\r\n    const onSubmit = (data) => {\r\n        var activity = {\r\n            'room': location.state.room,\r\n            'group': data['group'],\r\n            'class': data['class'],\r\n            'slot': location.state.slot,\r\n            'teacher': data['teacher'],\r\n            'day': location.state.day\r\n        };\r\n        console.log(data);\r\n        console.log(activity);\r\n        \r\n        axios.post('/createActivity', activity)\r\n        .then(() => console.log('New activity created'))\r\n        .catch(err => console.error(err));\r\n\r\n        // back to home\r\n        history.push('/');\r\n    }\r\n\r\n    return (\r\n        <div className=\"wrapper\" style={{marginLeft: '30%', marginRight: '30%', marginTop: '10px'}}>\r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                <h1 style={{marginLeft: '25%', marginBottom: '20px', marginTop: '20px'}}>New activity</h1>\r\n\r\n                <label>Select lecture</label>\r\n                <select name='class' className=\"form-control\" ref={register({ required: true})}>\r\n                    {lectures.map(optionsSelect)}\r\n                </select>\r\n                {errors.class && <p style={{color: 'red', marginLeft: '5px'}}>Field required</p>}\r\n\r\n                <label style={{marginTop: '10px'}}>Select teacher</label>\r\n                <select name='teacher' className=\"form-control\" ref={register({ required: true})}>\r\n                    {teachers.map(optionsSelect)}\r\n                </select>\r\n                {errors.teacher && <p style={{color: 'red', marginLeft: '5px'}}>Field required</p>}\r\n            \r\n                <label style={{marginTop: '10px'}}>Select group</label>\r\n                <select name='group' className=\"form-control\" ref={register({ required: true})} style={{marginBottom: '20px'}}>\r\n                    {groups.map(optionsSelect)}\r\n                </select>\r\n                {errors.group && <p style={{color: 'red', marginLeft: '5px'}}>Field required</p>}\r\n\r\n                <input type=\"submit\" value=\"Create activity\" className=\"btn btn-block\" style={{marginTop: '20px', backgroundColor: '#bb99ff'}}/>    \r\n                <input value=\"Cancel\" className=\"btn btn-block\" style={{marginTop: '20px', backgroundColor: '#d1d1e0'}}\r\n                    onClick={() => history.push('/')}/>                \r\n            </form>\r\n        </div>\r\n    );\r\n    \r\n}"]},"metadata":{},"sourceType":"module"}