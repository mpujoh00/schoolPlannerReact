{"ast":null,"code":"import _objectSpread from\"C:/Users/kaela/universidad/winter semester/graphical user interfaces/labs/school_planner_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"C:/Users/kaela/universidad/winter semester/graphical user interfaces/labs/school_planner_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/kaela/universidad/winter semester/graphical user interfaces/labs/school_planner_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/kaela/universidad/winter semester/graphical user interfaces/labs/school_planner_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from\"axios\";import{useForm}from\"react-hook-form\";import{useHistory}from'react-router-dom';import{columns,tableData}from\"./tableData\";import{useTable}from'react-table';import'./tableStyle.css';var Home=function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rooms=_useState2[0],setRooms=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),activities=_useState4[0],setActivities=_useState4[1];var _useForm=useForm(),handleSubmit=_useForm.handleSubmit,register=_useForm.register;var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),currentRoom=_useState6[0],setCurrentRoom=_useState6[1];var history=useHistory();var _useState7=useState(tableData),_useState8=_slicedToArray(_useState7,2),rowsData=_useState8[0],setRowsData=_useState8[1];useEffect(function(){var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log('getting data...');_context.next=3;return axios.get('/plannerData');case 3:result=_context.sent;if(rooms.length===0){setRooms(result.data.rooms);setActivities(result.data.activities);}if(currentRoom===undefined){setCurrentRoom(rooms[0]);}case 6:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();getData();},[rooms]);// UPDATING ACTIVITIES SHOWN\nuseEffect(function(){updateActivities();},[currentRoom]);var updateActivities=function updateActivities(){console.log('updating activities...');var rows=tableData;// reset\nif(currentRoom===undefined){setCurrentRoom(rooms[0]);}for(var i=0;i<activities.length;i++){var activity=activities[i];if(activity.room===currentRoom){var row=rows[activity.slot-1];row[activity['day']]=activity['class'];rows[activity.slot-1]=row;}}setRowsData(rows);history.push('/');// supposed to reload the table but not working\n};// CREATION OF THE TABLE\nvar _useTable=useTable({columns:columns,data:rowsData}),getTableProps=_useTable.getTableProps,getTableBodyProps=_useTable.getTableBodyProps,headerGroups=_useTable.headerGroups,rows=_useTable.rows,prepareRow=_useTable.prepareRow;// ROOMS\nvar roomChanged=function roomChanged(data){setCurrentRoom(data['room']);};var roomsSelect=function roomsSelect(room){if(room===currentRoom)return/*#__PURE__*/_jsx(\"option\",{selected:true,children:room});else return/*#__PURE__*/_jsx(\"option\",{children:room});};// CELL CLICKED\nvar cellClicked=function cellClicked(cell){console.log('cell clicked');var slot=cell.row.index+1;var day=cell.column.id;var info={'room':currentRoom,'slot':slot,'day':day};history.push('/createActivity',info);};return/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:'8%',marginRight:'8%',marginTop:'15px',marginBottom:'30px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",children:[/*#__PURE__*/_jsxs(\"form\",{onChange:handleSubmit(roomChanged),style:{marginBottom:'30px'},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Room:\"}),/*#__PURE__*/_jsx(\"select\",{name:\"room\",className:\"form-control\",ref:register({required:true}),style:{width:'150px'},children:rooms.map(roomsSelect)})]}),/*#__PURE__*/_jsxs(\"table\",_objectSpread(_objectSpread({},getTableProps()),{},{children:[/*#__PURE__*/_jsx(\"thead\",{children:headerGroups.map(function(headerGroup){return/*#__PURE__*/_jsx(\"tr\",_objectSpread(_objectSpread({},headerGroup.getHeaderGroupProps()),{},{children:headerGroup.headers.map(function(column){return/*#__PURE__*/_jsx(\"th\",_objectSpread(_objectSpread({},column.getHeaderProps()),{},{children:column.render('Header')}));})}));})}),/*#__PURE__*/_jsx(\"tbody\",_objectSpread(_objectSpread({},getTableBodyProps()),{},{children:rows.map(function(row){prepareRow(row);return/*#__PURE__*/_jsx(\"tr\",_objectSpread(_objectSpread({},row.getRowProps()),{},{children:row.cells.map(function(cell){return/*#__PURE__*/_jsx(\"td\",_objectSpread(_objectSpread({},cell.getCellProps()),{},{onDoubleClick:function onDoubleClick(){return cellClicked(cell);},children:cell.render('Cell')}));})}));})}))]}))]})});};export default Home;","map":{"version":3,"sources":["C:/Users/kaela/universidad/winter semester/graphical user interfaces/labs/school_planner_react/src/components/home.js"],"names":["React","useState","useEffect","axios","useForm","useHistory","columns","tableData","useTable","Home","rooms","setRooms","activities","setActivities","handleSubmit","register","currentRoom","setCurrentRoom","history","rowsData","setRowsData","getData","console","log","get","result","length","data","undefined","updateActivities","rows","i","activity","room","row","slot","push","getTableProps","getTableBodyProps","headerGroups","prepareRow","roomChanged","roomsSelect","cellClicked","cell","index","day","column","id","info","marginLeft","marginRight","marginTop","marginBottom","required","width","map","headerGroup","getHeaderGroupProps","headers","getHeaderProps","render","getRowProps","cells","getCellProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport axios from \"axios\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useHistory } from 'react-router-dom';\r\nimport { columns, tableData } from \"./tableData\";\r\nimport { useTable } from 'react-table';\r\nimport './tableStyle.css';\r\n\r\nconst Home = () => {\r\n\r\n    const [rooms, setRooms] = useState([]);\r\n    const [activities, setActivities] = useState([]);\r\n    const {handleSubmit, register} = useForm();\r\n    const [currentRoom, setCurrentRoom] = useState();\r\n    const history = useHistory();\r\n    const [rowsData, setRowsData] = useState(tableData);\r\n\r\n    useEffect(() => {\r\n        const getData = async () => {\r\n            console.log('getting data...');\r\n            const result = await axios.get('/plannerData');\r\n            if(rooms.length === 0){\r\n                setRooms(result.data.rooms);\r\n                setActivities(result.data.activities);\r\n            }\r\n            if(currentRoom === undefined){\r\n                setCurrentRoom(rooms[0]);\r\n            }\r\n        }\r\n        getData();\r\n    }, [rooms]);\r\n\r\n    // UPDATING ACTIVITIES SHOWN\r\n    useEffect(() => {\r\n        updateActivities();\r\n    }, [currentRoom]);\r\n\r\n    const updateActivities = () => {\r\n\r\n        console.log('updating activities...');\r\n        var rows = tableData; // reset\r\n\r\n        if(currentRoom === undefined){\r\n            setCurrentRoom(rooms[0]);\r\n        }\r\n\r\n        for(let i=0; i<activities.length; i++){\r\n            var activity = activities[i];\r\n            if(activity.room === currentRoom){\r\n                var row = rows[activity.slot-1];\r\n                row[activity['day']] = activity['class'];\r\n                rows[activity.slot-1] = row;\r\n            }\r\n        }\r\n        setRowsData(rows);\r\n        history.push('/');  // supposed to reload the table but not working\r\n    }\r\n\r\n    // CREATION OF THE TABLE\r\n    const {\r\n        getTableProps,\r\n        getTableBodyProps,\r\n        headerGroups,\r\n        rows,\r\n        prepareRow\r\n    } = useTable({ columns: columns, data: rowsData });\r\n\r\n    // ROOMS\r\n    const roomChanged = (data) => {\r\n        setCurrentRoom(data['room']);\r\n    }\r\n    \r\n    const roomsSelect = (room) => {\r\n        if(room === currentRoom)\r\n            return <option selected>{room}</option>;\r\n        else\r\n            return <option>{room}</option>;\r\n    }\r\n\r\n    // CELL CLICKED\r\n    const cellClicked = (cell) => {\r\n\r\n        console.log('cell clicked');\r\n\r\n        var slot = cell.row.index + 1;\r\n        var day = cell.column.id;\r\n\r\n        var info = {\r\n            'room': currentRoom,\r\n            'slot': slot,\r\n            'day': day,\r\n        }    \r\n        history.push('/createActivity', info);\r\n    }\r\n\r\n    return (\r\n        <div style={{marginLeft: '8%', marginRight: '8%', marginTop: '15px', marginBottom: '30px'}}>\r\n            <div className=\"wrapper\">\r\n\r\n                <form onChange={handleSubmit(roomChanged)} style={{marginBottom: '30px'}}>\r\n                    <label>Room:</label>\r\n                    <select name='room' className=\"form-control\" ref={register({ required: true})} style={{width: '150px'}}>\r\n                        {rooms.map(roomsSelect)}\r\n                    </select>       \r\n                </form>\r\n\r\n                <table {...getTableProps()}>\r\n                    <thead>\r\n                        {headerGroups.map((headerGroup) => (\r\n                            <tr {...headerGroup.getHeaderGroupProps()}>\r\n                                {headerGroup.headers.map((column) => (\r\n                                    <th {...column.getHeaderProps()}>{column.render('Header')}</th>\r\n                                ))}\r\n                            </tr>\r\n                        ))}                        \r\n                    </thead>\r\n                    <tbody {...getTableBodyProps()}>\r\n                        {rows.map((row) => {\r\n                            prepareRow(row)\r\n                            return(\r\n                                <tr {...row.getRowProps()}>\r\n                                    {row.cells.map((cell) => {\r\n                                        return <td {...cell.getCellProps()} onDoubleClick={() => cellClicked(cell)}>\r\n                                            {cell.render('Cell')}</td>\r\n                                    })}\r\n                                    \r\n                                </tr>\r\n                            )\r\n                        })}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>    \r\n    )\r\n}\r\n\r\nexport default Home"]},"metadata":{},"sourceType":"module"}